<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>pagination</title>
		<meta name="description" content="">
		<meta name="author" content="x_l_s">

		<meta name="viewport" content="width=device-width; initial-scale=1.0">

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico">
		<link rel="apple-touch-icon" href="/apple-touch-icon.png">
		<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css" type="text/css" media="screen" title="no title" charset="utf-8"/>
		
		<style type="text/css" media="screen">
			#paginationEventPanel {
				overflow: auto;
				width: 550px;
				height: 300px;
				min-height: 200px;
				margin: 10px;
				border: 1px dashed #48A5E1;
			}
			
			#contentPanel div {
				margin: 5px;
			}
			
			.change-list ul {
				margin: 0 0 10px 25px;
			}
			
			#paginationPanel5 {
				margin-bottom: 10px;
				padding: 5px;
				border: 5px solid orange;
			}
			
			a.button-selected {
				background-color: #3895D1;
				cursor: default;
			}
			.active {
				/*background: #09f;*/
			}
		</style>
	</head>

	<body>
		<div>
			<div class="container-fluid content-tuchu" id="container-fluid">
				<div>
					Pagination component example V<span id="versionShow">-</span>
				</div>
				
				<div style="padding: 10px;">
					<h5>Pagination1 Control: </h5>
					<div>
						<div id="navNumberControlPanel">
							<span>Navigation page number:</span>
							
							<a href="#" class="btn blue">1</a>
							<a href="#" class="btn blue">5</a>
							<a href="#" class="btn blue button-selected">10</a>
							<a href="#" class="btn blue">14</a>
							<a href="#" class="btn blue">18</a>
						</div>
						
						<div>
							<span>Page size: </span>
							
							<select id="pageSize" style="width: 100px;">
								<option value="10">10</option>
								<option value="20" selected="selected">20</option>
								<option value="50">50</option>
								<option value="100">100</option>
								<option value="200">200</option>
							</select>
						</div>
						
						<div id="countControlPanel">
							<span>Total count: </span>
							
							<a href="#" class="btn blue">0</a>
							<a href="#" class="btn blue">100</a>
							<a href="#" class="btn blue button-selected">203</a>
							<a href="#" class="btn blue">500</a>
							<a href="#" class="btn blue">1000</a>
							<a href="#" class="btn blue">10000</a>
						</div>
						
						<div id="refreshControlPanel" style="margin-top: 10px;">
							<span>Refresh: </span>
							
							<button class="btn radius4" data-is_trigger="true">
								refresh and trigger pageChangeHandle
							</button>
							<button class="btn radius4" data-is_trigger="false">
								refresh but not trigger pageChangeHandle
							</button>
						</div>
					</div>
					
					<hr />
					
					<h5>Pagination1(The whole Pagination example): </h5>
						1). listen onPageChange event; <br />
						2). navPageNumber, pageSize, totalCount can be setting; <br />
						3). refresh the Pagination manual
					<!-- Pagination Container -->
					<div id="paginationPanel" style="border: 3px solid red;"></div>
					
					<hr />
					
					<h5>Pagination1 Event: </h5>
					<div id="paginationEventPanel">
						<div id="contentPanel">
							<!-- log pagination event here -->
						</div>
					</div>
					
					<hr />
					
					<!-- Another Pagination here -->
					<h5>Pagination2(Another Pagination instance): </h5>
					<!-- Pagination Container -->
					<div id="paginationPanel2"></div>
					
					<hr />
					
					<!-- (No onPageChange event) -->
					<h5>Pagination3(No onPageChange event): </h5>
					<!-- Pagination Container -->
					<div id="paginationPanel3"></div>
					
					<hr />
					
					<!-- (Init by className) -->
					<h5>Pagination4(Init by className): </h5>
					<!-- Pagination Container -->
					<div id="paginationPanel4" class="pagination-panel"></div>
					
					<hr />
					
					<!-- (Init and destory) -->
					<h5>Pagination5(Destory example): </h5>
					<!-- Pagination Container -->
					<div id="paginationPanel5" title="Destory Example Pagination Container"></div>
					<a id="initAndDestoryButton" href="#" class="btn blue radius4">destory</a>
					
					<hr />
					
					<h5>Change log</h5>
					<div class="change-list" id="changeLog">
						Version
						<ul>
							<li>
								<span class="version">2.1.1</span>
								<ul>
									<li>
										change Total button disabled logic:
										it will be disabled only when no pages show
									</li>
								</ul>
							</li>
							<li>
								<span class="version">2.1</span>
								<ul>
									<li>add min page number config</li>
								</ul>
							</li>
							
							<li>
								<span class="version">2.0.1</span>
								<ul>
									<li>
										fix bug: pagination will throw an exception
										when call <code>pagination.destory</code> more than one time
									</li>
								</ul>
							</li>
							
							<li>
								<span class="version">2.0</span>
								<ul>
									<li>
										<span class="text-info">
											<strong>Release(2015.3.20)</strong>
										</span>
									</li>
									<li>supplement <code>destory</code> code</li>
								</ul>
							</li>
							
							<li>
								<span class="version">1.5</span>
								<ul>
									<li>add a return value for `gotoPage` method</li>
									<li>add method: refresh</li>
								</ul>
							</li>
							
							<li>
								<span class="version">1.4</span>
								<ul>
									<li>
										improve UE: when type in a page number and press `Enter`,
										then the input will get focus after refresh pages
									</li>
									<li>disable the input and `Go` button when total record is 0</li>
									<li>refresh the pages when click `Total` button</li>
								</ul>
							</li>
							
							<li>
								<span class="version">1.3</span>
								<ul>
									<li>
										bind input keydown event: when press `Enter` on keyboard,
										it will refresh by the inputPageNumber
									</li>
								</ul>
							</li>
							
							<li>
								<span class="version">1.2.1</span>
								<ul>
									<li>
										fix bug: when the navPageNumber is singular,
												it will show a decimal page such as `2.5`, `3.5`
									</li>
								</ul>
							</li>
							<li>
								<span class="version">1.2</span>
								<ul>
									<li>add documentation comments for property</li>
									<li>support `navPageNumber` config</li>
									<li>
										change navigation page number show logic: <br />
										it will show as more as possible pages between 1 and `lastPage`
									</li>
								</ul>
							</li>
							
							<li>
								<span class="version">1.1</span>
								<ul>
									<li>fix bug: the `Next` button can still click when total record is 0</li>
									<li>fault-tolerant: make sure pageNumber is not greater than lastPage again</li>
								</ul>
							</li>
							
							<li>
								<span class="version">1.0</span>
								<ul>
									<li>
										<span class="text-info">
											<strong>Release(2015.3.3)</strong>
										</span>
									</li>
								</ul>
							</li>
							
							<li>
								<span class="version">0.4</span>
								<ul>
									<li>do <code>destory</code> code</li>
								</ul>
							</li>
							
							<li>
								<span class="version">0.3.2</span>
								<ul>
									<li>optimize DOM element query efficiency</li>
								</ul>
							</li>
							<li>
								<span class="version">0.3.1</span>
								<ul>
									<li>
										fix bug: when jumpPage is <code>NaN</code>, then shouldn't trigger <code>onPageChange</code> event
									</li>
								</ul>
							</li>
							<li>
								<span class="version">0.3</span>
								<ul>
									<li>
										change the bind click event way of pageButton form <code>.click</code> to <code>.on</code>
									</li>
								</ul>
							</li>
							
							<li>
								<span class="version">0.2.1</span>
								<ul>
									<li>update constructor parameter, support jQuery selector</li>
									<li>add pageContainer reference</li>
								</ul>
							</li>
							<li>
								<span class="version">0.2</span>
								<ul>
									<li>
										use
										<code>&lt;div id="paginationPanelID"&gt;&lt;/div&gt;</code>
										<br />
										<code>new Pagination($("#paginationPanelID"))</code>
										<br />
										then can create a Pagination
									</li>
									<li>integration template, not depend on an external template</li>
									<li>integration pageControlDiv</li>
									<li>optimize template render performance</li>
								</ul>
							</li>
							
							<li>
								<span class="version">0.1.1</span>
								<ul>
									<li>fix bug: Reference Error</li>
								</ul>
							</li>
							<li>
								<span class="version">0.1</span>
								<ul>
									<li>base Pagination</li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</div>

<script src="lib/jquery/jquery-2.2.0.min.js" type="text/javascript" charset="utf-8"></script>
<script src="lib/bootstrap/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
<script src="pagination.js"></script>
<script type="text/javascript" charset="utf-8">
(function () {
	// use the last update version for head title version show
	$("#versionShow").html($("#changeLog .version").first().html());
})();

// The whole Pagination example: 1.listen onPageChange event; 2.pageSize and totalCount can be setting
(function () {
	// log container
	var $_paginationEventPanel = $("#paginationEventPanel");
	var $_contentPanel = $("#contentPanel");
	var divLog = function () {
		var content = Array.prototype.join.call(arguments, " ");
		var $_contentDiv = $("<div>").html(content);
		
		$_contentPanel.append($_contentDiv);
		$_paginationEventPanel.scrollTop($_contentPanel.height());
	};
	
	
	// use Pagination
	var pagination = new Pagination($("#paginationPanel"));
	pagination.gotoPage(5, 203);	// set default pageNumber and total count
	pagination.onPageChange = function (pageNumber, pageSize, oldPageNumber) {
		divLog([
			"pageNumber:[", pageNumber, "] , ",
			"pageSize:[", pageSize, "] , ",
			"oldPageNumber:[", oldPageNumber, "] , ",
			"totalCount:[", pagination.total, "]"
		].join(""));
		
		// change the pageNumber(manual)
		pagination.gotoPage(pageNumber);
	};
	
	var darkBlueClassName = "button-selected";
	// setting the navigation page number of Pagination
	$("#navNumberControlPanel").on("click", "a", function () {
		var navNumber = $(this).html();
		$(this).addClass(darkBlueClassName)
			.siblings().removeClass(darkBlueClassName);
		
		pagination.navPageNumber = Number(navNumber);
		pagination.gotoPage();
	});
	// setting the total count of Pagination
	$("#countControlPanel").on("click", "a", function () {
		var totalCount = $(this).html();
		$(this).addClass(darkBlueClassName)
			.siblings().removeClass(darkBlueClassName);
		
		pagination.gotoPage(1, totalCount);
	});
	// setting the pageSize of Pagination
	$("#pageSize").change(function () {
		var resetPageNumber = 1;
		var totalCount = null;
		var pageSize = $(this).val();
		
		pagination.gotoPage(resetPageNumber, totalCount, pageSize);
	});
	// refresh the Pagination
	$("#refreshControlPanel").on("click", "[data-is_trigger]", function () {
		pagination.refresh($(this).data("is_trigger"));
	});
	
	
	window.pagination = pagination;
})();


// Another Pagination instance
(function () {
	var pagination2 = new Pagination($("#paginationPanel2"));
	// set default pageNumber and total count
	pagination2.gotoPage(1, 100000);
	pagination2.onPageChange = function (pageNumber, pageSize, oldPageNumber) {
		// change the pageNumber(manual)
		pagination2.gotoPage(pageNumber);
	};
})();

// (No onPageChange event)
(function () {
	var pagination = new Pagination($("#paginationPanel3"));
	pagination.gotoPage(3, 100);
})();

// (Init by className)
(function () {
	var pagination = new Pagination("#container-fluid .pagination-panel");
	pagination.gotoPage(5, 200);
})();

// (Init and destory)
(function () {
	var initPagination = function () {
		var pagination = new Pagination("#paginationPanel5");
		pagination.gotoPage(5, 200);
		pagination.onPageChange = function (pageNumber, pageSize, oldPageNumber) {
			pagination.gotoPage(pageNumber);
		};
		
		return pagination;
	};
	
	var pagination = initPagination();
	
	$("#initAndDestoryButton").click(function () {
		var $_self = $(this);
		
		if (pagination) {
			pagination.destory();
			pagination = null;
			
			$_self.html("init");
		}
		else {
			pagination = initPagination();
			
			$_self.html("destory");
		}
	});
})();
</script>

		</div>
	</body>
</html>
